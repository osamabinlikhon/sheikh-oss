
> tmp-app@0.1.0 dev
> next dev

▲ Next.js 16.1.6 (Turbopack)
- Local:         http://localhost:3000
- Network:       http://192.168.0.2:3000
- Environments: .env

✓ Starting...
✓ Ready in 1157ms
○ Compiling / ...
 GET / 200 in 5.5s (compile: 5.0s, render: 538ms)
 GET / 200 in 137ms (compile: 10ms, render: 127ms)
Error [AI_InvalidPromptError]: Invalid prompt: The messages do not match the ModelMessage[] schema.
    at ignore-listed frames {
  prompt: [Object],
  [cause]: Error [AI_TypeValidationError]: Type validation failed: Value: [{"parts":[{"type":"text","text":"Plan a simple web app"}],"id":"I6TGGDiMBD54eoql","role":"user"}].
  Error message: [
    {
      "code": "invalid_union",
      "errors": [
        [
          {
            "code": "invalid_value",
            "values": [
              "system"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"system\""
          },
          {
            "expected": "string",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected string, received undefined"
          }
        ],
        [
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "assistant"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"assistant\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "tool"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"tool\""
          },
          {
            "expected": "array",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected array, received undefined"
          }
        ]
      ],
      "path": [
        0
      ],
      "message": "Invalid input"
    }
  ]
      at ignore-listed frames {
    value: [ [Object] ],
    context: undefined,
    [cause]: Error [ZodError]: [
      {
        "code": "invalid_union",
        "errors": [
          [
            {
              "code": "invalid_value",
              "values": [
                "system"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"system\""
            },
            {
              "expected": "string",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected string, received undefined"
            }
          ],
          [
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "assistant"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"assistant\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "tool"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"tool\""
            },
            {
              "expected": "array",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected array, received undefined"
            }
          ]
        ],
        "path": [
          0
        ],
        "message": "Invalid input"
      }
    ]
        at ignore-listed frames
  }
}
 POST /api/chat 200 in 2.6s (compile: 1840ms, render: 744ms)
 GET / 200 in 659ms (compile: 202ms, render: 457ms)
Error [AI_InvalidPromptError]: Invalid prompt: The messages do not match the ModelMessage[] schema.
    at ignore-listed frames {
  prompt: [Object],
  [cause]: Error [AI_TypeValidationError]: Type validation failed: Value: [{"parts":[{"type":"text","text":"Plan a simple web app"}],"id":"RnSqjg8KdvtoLFiM","role":"user"}].
  Error message: [
    {
      "code": "invalid_union",
      "errors": [
        [
          {
            "code": "invalid_value",
            "values": [
              "system"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"system\""
          },
          {
            "expected": "string",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected string, received undefined"
          }
        ],
        [
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "assistant"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"assistant\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "tool"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"tool\""
          },
          {
            "expected": "array",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected array, received undefined"
          }
        ]
      ],
      "path": [
        0
      ],
      "message": "Invalid input"
    }
  ]
      at ignore-listed frames {
    value: [ [Object] ],
    context: undefined,
    [cause]: Error [ZodError]: [
      {
        "code": "invalid_union",
        "errors": [
          [
            {
              "code": "invalid_value",
              "values": [
                "system"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"system\""
            },
            {
              "expected": "string",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected string, received undefined"
            }
          ],
          [
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "assistant"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"assistant\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "tool"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"tool\""
            },
            {
              "expected": "array",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected array, received undefined"
            }
          ]
        ],
        "path": [
          0
        ],
        "message": "Invalid input"
      }
    ]
        at ignore-listed frames
  }
}
 POST /api/chat 200 in 527ms (compile: 122ms, render: 405ms)
 GET / 200 in 1870ms (compile: 912ms, render: 958ms)
Error [AI_InvalidPromptError]: Invalid prompt: The messages do not match the ModelMessage[] schema.
    at ignore-listed frames {
  prompt: [Object],
  [cause]: Error [AI_TypeValidationError]: Type validation failed: Value: [{"parts":[{"type":"text","text":"Plan a simple web app"}],"id":"3cwlmkHzCU8FKATr","role":"user"}].
  Error message: [
    {
      "code": "invalid_union",
      "errors": [
        [
          {
            "code": "invalid_value",
            "values": [
              "system"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"system\""
          },
          {
            "expected": "string",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected string, received undefined"
          }
        ],
        [
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "assistant"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"assistant\""
          },
          {
            "code": "invalid_union",
            "errors": [
              [
                {
                  "expected": "string",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected string, received undefined"
                }
              ],
              [
                {
                  "expected": "array",
                  "code": "invalid_type",
                  "path": [],
                  "message": "Invalid input: expected array, received undefined"
                }
              ]
            ],
            "path": [
              "content"
            ],
            "message": "Invalid input"
          }
        ],
        [
          {
            "code": "invalid_value",
            "values": [
              "tool"
            ],
            "path": [
              "role"
            ],
            "message": "Invalid input: expected \"tool\""
          },
          {
            "expected": "array",
            "code": "invalid_type",
            "path": [
              "content"
            ],
            "message": "Invalid input: expected array, received undefined"
          }
        ]
      ],
      "path": [
        0
      ],
      "message": "Invalid input"
    }
  ]
      at ignore-listed frames {
    value: [ [Object] ],
    context: undefined,
    [cause]: Error [ZodError]: [
      {
        "code": "invalid_union",
        "errors": [
          [
            {
              "code": "invalid_value",
              "values": [
                "system"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"system\""
            },
            {
              "expected": "string",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected string, received undefined"
            }
          ],
          [
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "assistant"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"assistant\""
            },
            {
              "code": "invalid_union",
              "errors": [
                [
                  {
                    "expected": "string",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected string, received undefined"
                  }
                ],
                [
                  {
                    "expected": "array",
                    "code": "invalid_type",
                    "path": [],
                    "message": "Invalid input: expected array, received undefined"
                  }
                ]
              ],
              "path": [
                "content"
              ],
              "message": "Invalid input"
            }
          ],
          [
            {
              "code": "invalid_value",
              "values": [
                "tool"
              ],
              "path": [
                "role"
              ],
              "message": "Invalid input: expected \"tool\""
            },
            {
              "expected": "array",
              "code": "invalid_type",
              "path": [
                "content"
              ],
              "message": "Invalid input: expected array, received undefined"
            }
          ]
        ],
        "path": [
          0
        ],
        "message": "Invalid input"
      }
    ]
        at ignore-listed frames
  }
}
 POST /api/chat 200 in 587ms (compile: 189ms, render: 398ms)
✓ Compiled in 2.7s
